 <input type='hidden' id='IHIdfacebookNuvem' value='0'>
 <!-- <script src="js/jquery-1.10.2.min.js"></script>	-->
      <script src="js/jquery-1.12.4.js"></script>  
      <script src="js/jquery-ui.js">	</script>	
 <script>
 
 function criaAtualizaSessao(id, informacao) {
 try{
     var Storage = window.localStorage;

    if (typeof(Storage) !== "undefined") {

        if (informacao) {

            Storage.setItem(id, informacao);

            console.log("Em criaAtualizaSessao: Sessao " + id + " valor: " + informacao + " criada!")

        } else {

            console.log("Em criaAtualizaSessao: Sessao " + id + " valor: " + informacao + " Nao criada!")

        }



    } else {

        alert("Desculpe! No Web Storage support..em criaAtualizaSessao");

    }
 } catch (e) {

        alert("criaAtualizaSessao de fb.html[iframe] :  " + e.message);

    }

    

}



function verificaExistenciaSessao(id) {

    var Storage = window.localStorage;

    if ((Storage.getItem(id)) && (Storage.getItem(id) != undefined)) {

        console.log("Em verificaExistenciaSessao: Sessao " + id + " existe! Vale:" + Storage.getItem(id));

        return true;

    } else {

        console.log("Em verificaExistenciaSessao:Sessao " + id + " NAO existe ou indefinido!");

        return false;

    }



}



function recuperaSessao(id) {

    var Storage = window.localStorage;

    if (typeof(Storage) !== "undefined") {

        if ((Storage.getItem(id)) && (Storage.getItem(id) != undefined)) {

          //  console.log("Em recuperaSessao: Sessao " + id + " recuperada: " + Storage.getItem(id))

            return Storage.getItem(id);

        }

    } else {

        alert("Desculpe! No Web Storage support.. em recuperaSessao");

    }

}



function removeSessao(id) {

    var Storage = window.localStorage;

    if (typeof(Storage) !== "undefined") {

        if (Storage.getItem(id)) {

            console.log("Em removeSessao: Sessao de ID " + id + " será apagada: " + Storage.getItem(id))

            Storage.removeItem(id);

        }

    } else {

        alert("Desculpe! No Web Storage support.. emremoveSessao");

    }

}
 function fFB() {

   //id primeio app facebook 609463026453550
// id app test1 com funcionalidades para avaliar (lista de amigos): 1940074352803565
window.fbAsyncInit = function() {
    "use strict";

    FB.init({
      appId      : '609463026453550',
      cookie     : true,
      xfbml      : true,
      version    : 'v6.0'
    });
    //alert('fbAsyncInit')  ;
   FB.AppEvents.logPageView();
   // {"fields":"id,first_name,last_name,picture,friends"} para usar amigos do face-suspenso
   function setGetDadosPassageiro(){
            FB.api(
          '/me',
          'GET',
           {"fields":"id,first_name,last_name,picture"},
           function(response) {
              
               var url_foto="https://graph.facebook.com/" + response.id + "/picture";
               /** var amigosFace='';//response.friends.data; suspenso em 30/03/2020 corona
                   
              
                function criaIHamigosFace(amsFace){
                   var varsSessaoAmigosFace;
                   var virgula=",";
                         varsSessaoAmigosFace="";
                         for (var x=0;x<amsFace.length;x++){
                             if(x==amsFace.length-1){
                                 varsSessaoAmigosFace+=amsFace[x].id;
                             }else{
                                 varsSessaoAmigosFace+=amsFace[x].id+virgula;
                             }
                             
                             
                         }
                         return varsSessaoAmigosFace;//string tipo "id,id..." dos amigos do face
                     }
                                
               //alert(amigosFace); */
               var StringIdAmigosFace='';//criaIHamigosFace(amigosFace) ;
               if (!(response.id=='undefined')){
                    $.post('php/cadastraPassageiroViaFacebook.php', {//cadastra/pega dado passageiro
                "id_facebook": response.id,            
                "first_name": response.first_name,
                 "last_name": response.last_name,
                  "url_foto":url_foto,
                  "StringIdAmigosFace":StringIdAmigosFace
                 },
                  function(r) {
                       //quando os dados do passageiro vêm do face são cadastros ou atualizados
                }); 
               }else{
                  // alert(response.id);
                   //window.location.href = 'https://teletransporte.net';
               }
                                     }
             );
       //     FB.api('/me/friends',{ fields: 'name,id' }, function(r) {
     //alert(r.name); }); //.. it only has two values name and id. 
   }

   FB.Event.subscribe('auth.login', function(response){ //Ocorre quando loga via facebook       
           setGetDadosPassageiro();  
      
     });
 
 
     FB.Event.subscribe('auth.logout', function(response){ //Ocorre quando loga via facebook    
  
  //    FB.login(function(response) {
            // Original FB.login code
       //     }, { auth_type: 'reauthenticate' });
      
     });
   
    FB.getLoginStatus(function(response) {
         if (response.status === 'connected') {
             var uid = response.authResponse.userID;
             var accessToken = response.authResponse.accessToken;
            criaAtualizaSessao("uidNuvem",uid);
              
         } else if (response.status === 'not_authorized') {
             if (verificaExistenciaSessao("uidNuvem")){
                 removeSessao("uidNuvem");
             }
               
             console.log('not_authorized');
         } else {
             if (verificaExistenciaSessao("uidNuvem")){
                 window.opener.location.reload(false);
                 removeSessao("uidNuvem");
             }
             
                
             console.log('is not logged');
          
         }
     });
       
    };

      (function(d, s, id){
         var js, fjs = d.getElementsByTagName(s)[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement(s); js.id = id;
         js.src = "https://connect.facebook.net/en_US/sdk.js";
         fjs.parentNode.insertBefore(js, fjs);
       }(document, 'script', 'facebook-jssdk'));
       


}
    fFB();
     
 </script>
 
 
 <div class="fb-login-button" data-width="" data-size="medium" data-button-type="login_with" data-auto-logout-link="true" scope="public_profile" data-use-continue-as="true"></div>
 
 